<!DOCTYPE html>
<html>

<head></head>

<body>
    <div>
        <link href="/TRIALWEBSITE/css/learning.css" rel="stylesheet">
        <div class="login-page-container">
            <div class="login-page-login-page">
                <div class="login-page-group25">
                    <div class="login-page-frame35276">
                        <div class="login-page-frame9">
                            <span class="login-page-text"><span>Big Brain Kids</span></span>
                            <img src="/TRIALWEBSITE/images/Vector1I2226-tujo.svg" alt="Vector1I2226"
                                class="login-page-vector1">
                            <a href="/TRIALWEBSITE/html/homepage.html" class="login-page-text02">Home</a>
                            <a href="/TRIALWEBSITE/html/howitworks.html" class="login-page-text04">How it works</a>
                            <a href="/TRIALWEBSITE/html/statistics.html" class="login-page-text06">Statistics</a>
                            <a href="/TRIALWEBSITE/html/who-we-are.html" class="login-page-text08">Who We Are</a>

                            <div class="login-page-frame3">
                                <span class="login-page-text08 TextBody2"></span>
                            </div>
                        </div>
                    </div>
                    <div class="login-page-frame7">
                        <div class="login-page-frame2">
                            <a href="/TRIALWEBSITE/html/homepage.html" class="login-page-text11"
                                onclick="logOut()"><span>Log Out</a></span>
                        </div>
                    </div>
                    <div class="learning-container">
                        <div class="learning-frame35">
                            <div class="learning-frame36">
                                <div class="learning-frame16">
                                    <img src="https://aheioqhobo.cloudimg.io/v7/_playground-bucket-v2.teleporthq.io_/86814649-030b-4c1f-ac73-f2e8add0129c/a867ce63-eb95-468a-826d-d4a38ec8fef0?org_if_sml=145199&amp;force_format=original"
                                        alt="image331795" class="learning-image33">
                                    <div class="learning-frame17">
                                        <div class="learning-frame18">
                                            <span class="learning-text HeadingsHeading3">
                                                <div id="title">
                                                    <h1>Your Current Progress</h1>
                                                </div>
                                            </span>
                                        </div>
                                        <div class="learning-frame181">
                                            <div class="learning-group16">
                                                <img src="https://aheioqhobo.cloudimg.io/v7/_playground-bucket-v2.teleporthq.io_/86814649-030b-4c1f-ac73-f2e8add0129c/0159da58-7d47-4257-9a52-579d80353541?org_if_sml=1123&amp;force_format=original"
                                                    alt="Ellipse21795" class="learning-ellipse2">
                                                <div class="learning-frame3">
                                                    <div class="learning-frame182">
                                                        <span class="learning-text04 TextBody3">
                                                            <span>Addition</span>
                                                        </span>
                                                    </div>
                                                    <span class="learning-text06 AdditionalExtra1">
                                                        <span class="learning-text07"></span>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="learning-group17">
                                                <img src="https://aheioqhobo.cloudimg.io/v7/_playground-bucket-v2.teleporthq.io_/86814649-030b-4c1f-ac73-f2e8add0129c/f353c768-c9a5-4278-861d-e6d97f31f23d?org_if_sml=1123&amp;force_format=original"
                                                    alt="Ellipse21795" class="learning-ellipse21">
                                                <div class="learning-frame31">
                                                    <div class="learning-frame183">
                                                        <span class="learning-text08 TextBody3">
                                                            <span>Subtraction</span>
                                                        </span>
                                                        <span class="learning-text10 AdditionalExtra1">
                                                            <span class="learning-text11"></span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="learning-group161">
                                                <img src="https://aheioqhobo.cloudimg.io/v7/_playground-bucket-v2.teleporthq.io_/86814649-030b-4c1f-ac73-f2e8add0129c/581e1762-de46-474e-9983-5a7169914117?org_if_sml=1123&amp;force_format=original"
                                                    alt="Ellipse22255" class="learning-ellipse22">
                                                <div class="learning-frame32">
                                                    <div class="learning-frame184">
                                                        <span class="learning-text12 TextBody3">
                                                            <span>Multiplication</span>
                                                        </span>
                                                        <span class="learning-text14 AdditionalExtra1">
                                                            <span class="learning-text15"></span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="learning-group18">
                                                <img src="https://aheioqhobo.cloudimg.io/v7/_playground-bucket-v2.teleporthq.io_/86814649-030b-4c1f-ac73-f2e8add0129c/fa129e27-fc90-4961-ab49-9e47840cd3a4?org_if_sml=1123&amp;force_format=original"
                                                    alt="Ellipse22255" class="learning-ellipse23">
                                                <div class="learning-frame33">
                                                    <div class="learning-frame185">
                                                        <span class="learning-text16 TextBody3">
                                                            <span>Division</span>
                                                        </span>
                                                        <span class="learning-text18 AdditionalExtra1">
                                                            <span class="learning-text19">0%</span>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="learning-frame35283">
                                    <div class="learn-button-container">
                                        <div class="learning-frame35284">
                                            <button class="learn-btn">Learn</button>
                                        </div>
                                    </div>

                                </div>

                                <!-- Popup for operation selection -->
                                <div class="popup" id="operationPopup">
                                    <div class="popup-content">
                                        <h2>Select an Operation to Learn</h2>
                                        <div class="operations">
                                            <button class="operation-btn" data-operation="addition">Addition</button>
                                            <button class="operation-btn"
                                                data-operation="subtraction">Subtraction</button>
                                            <button class="operation-btn"
                                                data-operation="multiplication">Multiplication</button>
                                            <button class="operation-btn" data-operation="division">Division</button>
                                        </div>
                                        <button class="close-btn" onclick="closePopup()">Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="/TRIALWEBSITE/js/backend.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            checkSession()
                .then(res => {
                    console.log(res)
                    if (res.authenticated) {
                        getScore()
                            .then(res => {
                                document.getElementsByClassName('learning-text07')[0].innerHTML = `${(res.addition * 100).toFixed(2)}%`;
                                document.getElementsByClassName('learning-text11')[0].innerHTML = `${(res.subtraction * 100).toFixed(2)}%`;
                                document.getElementsByClassName('learning-text15')[0].innerHTML = `${(res.multiplication * 100).toFixed(2)}%`;
                                document.getElementsByClassName('learning-text19')[0].innerHTML = `${(res.division * 100).toFixed(2)}%`;
                            })
                    } else {
                        window.location.replace('http://127.0.0.1:5500/TRIALWEBSITE/html/homepage.html');
                        console.log('NOT LOGGED IN');
                    }
                })
                .catch(error => {
                    console.error('Error during session check:', error);
                });
        });

        function openPopup() {
            document.getElementById('operationPopup').style.display = 'flex';

            const operations = [
                { name: 'addition', percentage: parseFloat(document.getElementsByClassName('learning-text07')[0].textContent) },
                { name: 'subtraction', percentage: parseFloat(document.getElementsByClassName('learning-text11')[0].textContent) },
                { name: 'multiplication', percentage: parseFloat(document.getElementsByClassName('learning-text15')[0].textContent) },
                { name: 'division', percentage: parseFloat(document.getElementsByClassName('learning-text19')[0].textContent) }
            ];

            const lowestPercentageOperation = operations.reduce((min, op) => op.percentage < min.percentage ? op : min);

            const recommendedButton = document.querySelector(`.operation-btn[data-operation="${lowestPercentageOperation.name}"]`);

            recommendedButton.classList.add('recommended');
            recommendedButton.innerHTML += ' (Recommended)';

        }


        function closePopup() {

            const operationButtons = document.querySelectorAll('.operation-btn');
            operationButtons.forEach(button => {
                button.classList.remove('recommended');
                button.innerHTML = button.innerHTML.replace(' (Recommended)', ''); // Remove "(Recommended)" text
            });

            document.getElementById('operationPopup').style.display = 'none';
        }

        document.querySelector('.learn-btn').addEventListener('click', openPopup);

        const operationBtns = document.querySelectorAll('.operation-btn');
        operationBtns.forEach(btn => {
            btn.addEventListener('click', function () {
                const selectedOperation = this.dataset.operation;
                window.location.replace(`http://127.0.0.1:5500/TRIALWEBSITE/html/${selectedOperation}.html`);
            });
        });
    </script>
</body>

</html>